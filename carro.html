<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pagamento do Creta - Magareti</title>
<style>
  body {
    font-family: Hyundai, sans-serif;
    text-align: center;
    background-color: #f7f7f7;
    margin-top: 40px;
  }

  .container {
    position: relative;
    width: 533px;
    margin: auto;
  }

  img {
    width: 100%;
    display: block;
    border-radius: 12px;
    position: relative;
    z-index: 1;
  }

  .overlay {
    position: absolute;
    top: 0;
    right: 0;
    height: 100%;
    background-color: rgba(240, 240, 240, 0.9);
    width: 100%;
    border-radius: 12px;
    transition: width 0.5s ease;
    z-index: 2;
  }

  .form-area {
    margin-top: 30px;
    position: relative;
    z-index: 3;
  }

  input {
    margin: 8px;
    padding: 10px;
    font-size: 16px;
    width: 200px;
    border: 1px solid #ccc;
    border-radius: 8px;
  }

  button {
    padding: 10px 20px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    background-color: #0077cc;
    color: white;
    cursor: pointer;
  }

  button:hover {
    background-color: #005fa3;
  }

  table {
    margin: 30px auto;
    border-collapse: collapse;
    width: 70%;
  }

  th, td {
    padding: 10px;
    border: 1px solid #ccc;
  }

  th {
    background-color: #0077cc;
    color: white;
  }

  .reset-btn {
    margin-top: 15px;
    background-color: #cc0000;
  }

  .reset-btn:hover {
    background-color: #990000;
  }
</style>
</head>
<body>

<h2>ðŸš— Pagamento do Creta - Magareti</h2>
<p>Total a ser pago: <strong>R$ 74.500</strong></p>
<p style="text-align: center; color: #555; font-style: italic; margin-top: 5px;">
  ðŸ“– "Consagre ao Senhor tudo o que vocÃª faz, e os seus planos serÃ£o bem-sucedidos".
  <br><strong style="font-style: normal;">ProvÃ©rbios 16:3</strong>
</p>

<div class="container">
  <img src="ee7510ec-e2c5-43e7-ab02-670556f4f40f.png" alt="Carro">
  <div class="overlay" id="overlay"></div>
</div>

<div class="form-area">
  <input type="text" id="nomePessoa" placeholder="Nome">
  <input type="number" id="valorPago" placeholder="Valor pago">
  <input type="password" id="senha" placeholder="Senha">
  <button onclick="registrarPagamento()">Registrar</button>
  <button class="reset-btn" onclick="resetarTudo()">Resetar Tudo</button>
</div>

<table id="historico">
  <thead>
    <tr>
      <th>Data</th>
      <th>Nome</th>
      <th>Valor Pago (R$)</th>
      <th>Acumulado (R$)</th>
      <th>% Pago</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
  const total = 74500;
  let acumulado = 0;
  const overlay = document.getElementById('overlay');
  const historicoTabela = document.getElementById('historico').querySelector('tbody');

  // ðŸ”¹ Carregar histÃ³rico salvo no localStorage
  window.onload = function() {
    const dadosSalvos = JSON.parse(localStorage.getItem('historicoPagamentos')) || [];
    acumulado = parseFloat(localStorage.getItem('valorAcumulado')) || 0;

    atualizarOverlay();
    dadosSalvos.forEach(item => adicionarLinhaTabela(item));
  };

  function registrarPagamento() {
    const nome = document.getElementById('nomePessoa').value.trim();
    const valor = parseFloat(document.getElementById('valorPago').value);
    const senha = document.getElementById('senha').value;

    if (!nome || isNaN(valor) || valor <= 0) {
      alert('Preencha o nome e um valor vÃ¡lido.');
      return;
    }

    if (senha !== 'DeusÃ©Fiel') {
      alert('Senha incorreta.');
      return;
    }

    acumulado += valor;
    if (acumulado > total) acumulado = total;

    const percentual = (acumulado / total) * 100;
    const hoje = new Date().toLocaleDateString('pt-BR');
    const registro = {
      data: hoje,
      nome: nome,
      valor: valor,
      acumulado: acumulado,
      percentual: percentual.toFixed(2)
    };

    adicionarLinhaTabela(registro);
    salvarLocalmente(registro);

    atualizarOverlay();

    document.getElementById('valorPago').value = '';
    document.getElementById('senha').value = '';
  }

  function adicionarLinhaTabela(registro) {
    const linha = `
      <tr>
        <td>${registro.data}</td>
        <td>${registro.nome}</td>
        <td>${registro.valor.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
        <td>${registro.acumulado.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
        <td>${registro.percentual}%</td>
      </tr>
    `;
    historicoTabela.innerHTML += linha;
  }

  function salvarLocalmente(registro) {
    const historico = JSON.parse(localStorage.getItem('historicoPagamentos')) || [];
    historico.push(registro);
    localStorage.setItem('historicoPagamentos', JSON.stringify(historico));
    localStorage.setItem('valorAcumulado', acumulado);
  }

  function atualizarOverlay() {
    const percentual = (acumulado / total) * 100;
    overlay.style.width = (100 - percentual) + '%';
  }

function resetarTudo() {
  const senhaReset = prompt('Digite a senha para resetar todo o histÃ³rico:');
  if (senhaReset === 'DeusÃ©Fiel') {
    if (confirm('Tem certeza que deseja apagar todo o histÃ³rico e zerar o progresso?')) {
      localStorage.removeItem('historicoPagamentos');
      localStorage.removeItem('valorAcumulado');
      historicoTabela.innerHTML = '';
      acumulado = 0;
      atualizarOverlay();
      alert('HistÃ³rico resetado com sucesso!');
    }
  } else {
    alert('Senha incorreta. AÃ§Ã£o cancelada.');
  }
}

</script>

</body>
</html>
